(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4941],{4941:(X,U,Z)=>{"use strict";Z.r(U),Z.d(U,{MusicPlayerPageModule:()=>o});var q=Z(9181),Q=Z(8996),V=Z(6024),h=Z(7579),n=Z(4650);class w{constructor(){this.GlobalRoutes=V.r,this.currentRoute=V.r.DEFAULT,this.$destroyInterceptor=new h.x}get $destroyed(){return this.$destroyInterceptor.asObservable()}destroySubscriptions(){this.$destroyInterceptor.next(!0)}ngOnDestroy(){this.destroySubscriptions()}}w.\u0275fac=function(a){return new(a||w)},w.\u0275cmp=n.Xpm({type:w,selectors:[["ng-component"]],decls:0,vars:0,template:function(a,e){},encapsulation:2});var R=Z(6454),E=Z.n(R),C=Z(603),_=Z(6895);class A{}A.\u0275fac=function(a){return new(a||A)},A.\u0275cmp=n.Xpm({type:A,selectors:[["app-music-button"]],inputs:{disabled:"disabled",active:"active"},ngContentSelectors:["*"],decls:3,vars:6,consts:[[1,"w-12","h-12","cursor-pointer","relative","overflow-hidden","rounded-full","ion-activatable","flex","items-center","justify-center"]],template:function(a,e){1&a&&(n.F$t(),n.TgZ(0,"div",0),n._UZ(1,"ion-ripple-effect"),n.Hsn(2),n.qZA()),2&a&&(n.Tol(e.active||""===e.active?"bg-white bg-opacity-20 text-green-500":""),n.ekj("text-white",!e.disabled)("text-gray-500",!!e.disabled||""===e.disabled))},dependencies:[C.H$],encapsulation:2});const g=["modal"],d=["waveform"];function m(u,a){if(1&u){const e=n.EpF();n.TgZ(0,"ion-icon",30),n.NdJ("click",function(){n.CHM(e);const p=n.oxw(2);return n.KtG(p.onClickPlay())}),n.qZA()}}function O(u,a){if(1&u){const e=n.EpF();n.TgZ(0,"ion-icon",31),n.NdJ("click",function(){n.CHM(e);const p=n.oxw(2);return n.KtG(p.onClickPlay())}),n.qZA()}}function x(u,a){if(1&u&&(n.ynx(0),n.YNc(1,m,1,0,"ion-icon",28),n.YNc(2,O,1,0,"ion-icon",29),n.BQk()),2&u){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.isPlaying),n.xp6(1),n.Q6J("ngIf",!e.isPlaying)}}function k(u,a){1&u&&(n.ynx(0),n._UZ(1,"ion-spinner",32),n.BQk())}function M(u,a){1&u&&n._UZ(0,"ion-icon",47)}function P(u,a){if(1&u&&(n.TgZ(0,"div"),n._uU(1),n.qZA()),2&u){const e=n.oxw().index,c=n.oxw(2);n.xp6(1),n.hij(" ",c.formatTime(180+17*e)," ")}}function v(u,a){1&u&&n._UZ(0,"ion-spinner",32)}function b(u,a){if(1&u){const e=n.EpF();n.ynx(0),n.TgZ(1,"div",39),n.NdJ("click",function(){const T=n.CHM(e).index,W=n.oxw(2);return n.KtG(W.onClickPlaylistItem(T))}),n.TgZ(2,"div",40),n._UZ(3,"img",41),n.qZA(),n.TgZ(4,"div")(5,"h2",42),n.YNc(6,M,1,0,"ion-icon",43),n._uU(7),n.qZA(),n.TgZ(8,"h3",44),n._uU(9),n.qZA()(),n.TgZ(10,"div",45),n.YNc(11,P,2,1,"div",23),n.YNc(12,v,1,0,"ion-spinner",46),n.qZA()(),n.BQk()}if(2&u){const e=a.$implicit,c=a.index,p=n.oxw(2);n.xp6(1),n.ekj("bg-green-100",p.currentSongIndex===c),n.xp6(2),n.Q6J("src",e.files.cover,n.LSH),n.xp6(3),n.Q6J("ngIf",p.currentSongIndex===c),n.xp6(1),n.hij(" ",e.title," "),n.xp6(2),n.Oqu(e.artist),n.xp6(2),n.Q6J("ngIf",!p.isLoading||p.currentSongIndex!==c),n.xp6(1),n.Q6J("ngIf",p.isLoading&&p.currentSongIndex===c)}}function f(u,a){if(1&u){const e=n.EpF();n.TgZ(0,"div",33)(1,"div",34),n.NdJ("click",function(){n.CHM(e);const p=n.oxw(),T=n.MAs(37);return n.KtG(T.setCurrentBreakpoint(p.lastBreakpoint))}),n.TgZ(2,"ion-button",35),n.ALo(3,"async"),n._UZ(4,"ion-icon",36),n._uU(5," Playlist "),n.qZA()(),n.TgZ(6,"div",37),n.YNc(7,b,13,8,"ng-container",38),n.qZA()()}if(2&u){const e=n.oxw(),c=n.MAs(37);let p;n.xp6(2),n.Q6J("color",(null==(p=n.lcZ(3,2,null==c?null:c.ionBreakpointDidChange))?null:p.detail.breakpoint)!==e.lastBreakpoint?"light":"dark"),n.xp6(5),n.Q6J("ngForOf",e.songs)}}const r=function(u){return{visibility:u}},s=function(u,a){return[u,a]};class l extends w{get currentSong(){return this.songs[this.currentSongIndex]}get initialBreakpoint(){return 60/screen.height}get lastBreakpoint(){return.85}constructor(a,e){super(),this.alertController=a,this.cdr=e,this.songs=[{title:"Harleys in Hawaii",artist:"Katy Perry",files:{cover:"/assets/albums/katy-perry-cover.png",bg:"/assets/albums/katy-perry-background.jpg",audio:"/assets/albums/katy-perry.mp3"}},{title:"One Kiss",artist:"Dia Lipa",files:{cover:"/assets/albums/dua-lipa-cover.jpg",bg:"/assets/albums/dua-lipa-background.jpg",audio:"/assets/albums/dua-lipa.mp3"}},{title:"Only Girl (In The World)",artist:"Rihanna",files:{cover:"/assets/albums/rihanna-cover.png",bg:"/assets/albums/rihanna-background.jpg",audio:"/assets/albums/rihanna.mp3"}},{title:"Old Town Road",artist:"Lil Nas X (feat. Billy Ray Cyrus)",files:{cover:"/assets/albums/lil-nas-cover.jpg",bg:"/assets/albums/lil-nas-background.jpg",audio:"/assets/albums/lil-nas.mp3"}},{title:"Pump It",artist:"Black Eyed Peas",files:{cover:"/assets/albums/black-eyed-peas-cover.jpg",bg:"/assets/albums/black-eyed-peas-background.jpg",audio:"/assets/albums/black-eyed-peas.mp3"}}],this.currentRoute=this.GlobalRoutes.MUSIC_PLAYER,this.currentSongIndex=0,this.isDrawn=!1,this.isPlaying=!1,this.isLoading=!0,this.duration=0,this.currentTime=0,this.init=!1,this.repeat=!1,this.mix=!1}ngOnDestroy(){super.ngOnDestroy(),this.modal.canDismiss=!0,this.modal.dismiss()}ngAfterViewInit(){this.songs.forEach(a=>{const e=document.createElement("div");e.style.backgroundImage=`background-image: url(${a.files.bg})`,e.style.display="none",document.body.appendChild(e)}),this.wavesurfer=E().create({container:this.waveformElm.nativeElement,waveColor:"#999999",progressColor:"#ffffff",cursorColor:"transparent",barWidth:4,barRadius:6,cursorWidth:1,height:40,maxCanvasWidth:400,barGap:3,responsive:!0,backend:"MediaElement"}),this.wavesurfer.load(this.currentSong.files.audio),this.wavesurfer.on("ready",()=>{this.init||this.alertController.create({header:"Info",message:"You can <b>play in the background</b> and manage music on <b>Notification Center</b>",buttons:["OK"]}).then(a=>a.present()),this.duration=Math.floor(this.wavesurfer.getDuration()),this.init&&this.wavesurfer.play(),this.init=!0,this.isLoading=!1}),this.wavesurfer.on("waveform-ready",()=>{this.isDrawn=!0,this.wavesurfer.setCursorColor("#ffffff")}),this.wavesurfer.on("audioprocess",a=>{this.updateCurrentTime()}),this.wavesurfer.on("play",()=>{this.isPlaying=!0,navigator.mediaSession&&(navigator.mediaSession.setActionHandler("previoustrack",()=>{this.onPrev()}),navigator.mediaSession.setActionHandler("pause",()=>{this.onClickPlay()}),navigator.mediaSession.setActionHandler("play",()=>{this.onClickPlay()}),navigator.mediaSession.setActionHandler("nexttrack",()=>{this.onNext()}),navigator.mediaSession.metadata=new MediaMetadata({title:this.currentSong.title,album:"Music Player",artist:this.currentSong.artist,artwork:[{src:this.currentSong.files.cover}]}))}),this.wavesurfer.on("pause",()=>{this.isPlaying=!1}),this.wavesurfer.on("seek",()=>{this.updateCurrentTime()}),this.wavesurfer.on("finish",()=>{this.repeat?this.loadCurrentSong():this.onNext()})}getBackgroundImgStyle(){return`background-image: url(${this.currentSong.files.bg})`}ngOnInit(){}onClickPlay(){this.wavesurfer.isPlaying()?this.wavesurfer.pause():this.wavesurfer.play()}onClickPlaylistItem(a){this.currentSongIndex=a,this.loadCurrentSong()}onNext(){this.mix?(this.currentSongIndex=this.randomSongIndex(),this.loadCurrentSong()):this.currentSongIndex!==this.songs.length-1&&(this.currentSongIndex++,this.loadCurrentSong())}onPrev(){0!==this.currentSongIndex&&(this.currentSongIndex--,this.loadCurrentSong())}loadCurrentSong(){this.isDrawn=!1,this.isLoading=!0,this.wavesurfer.setCursorColor("transparent"),this.wavesurfer.load(this.currentSong.files.audio)}updateCurrentTime(){const a=Math.floor(this.wavesurfer.getCurrentTime());this.currentTime!==a&&(this.currentTime=a,this.cdr.detectChanges())}randomSongIndex(){const e=this.songs.length-1,c=Math.floor(Math.random()*(e-0+1)+0);return c===this.currentSongIndex?this.randomSongIndex():c}formatTime(a){if(!a)return"00:00";const e=Math.floor(a/60),c=Math.floor(a)%60;return(e<10?"0":"")+e.toString()+":"+(c<10?"0":"")+c.toString()}canDismiss(){const a=document.getElementById("playlist-modal");return a.setCurrentBreakpoint(a.breakpoints[0]),!1}}l.\u0275fac=function(a){return new(a||l)(n.Y36(C.Br),n.Y36(n.sBO))},l.\u0275cmp=n.Xpm({type:l,selectors:[["app-music-player"]],viewQuery:function(a,e){if(1&a&&(n.Gf(g,5),n.Gf(d,5)),2&a){let c;n.iGM(c=n.CRH())&&(e.modal=c.first),n.iGM(c=n.CRH())&&(e.waveformElm=c.first)}},features:[n.qOj],decls:40,vars:30,consts:[[1,""],[1,"w-full","h-full","bg-black","bg-cover","bg-center","bg-no-repeat","transition-all","duration-500"],[1,"bg-gradient-to-b","from-transparent","to-[#000000aa]","w-full","h-full","flex","flex-col","items-center","justify-between"],[1,"my-auto"],[1,"w-44","lg+:w-72","rounded-lg","mx-auto"],["alt","cover",1,"rounded-2xl","mx-auto",3,"src"],[1,"text-center","text-white","mt-4"],[1,"text-3xl","font-semibold","mb-2"],[1,"mb-28"],[1,"px-4","gap-2","flex","items-center","justify-between","w-full","text-white","text-sm","h-20",3,"ngStyle"],[1,"w-11","text-right"],[1,"waveform",2,"width","calc(100% - 5rem)"],["waveform",""],["color","light","type","indeterminate",1,"mt-10",3,"hidden"],[1,"w-11"],[1,"flex","items-center","justify-between","gap-10"],[3,"active","click"],["name","repeat-outline",1,"w-8","h-8"],[1,"absolute","text-green-500","text-[0.5rem]",3,"hidden"],[1,"flex","items-center","justify-center","gap-4"],[3,"disabled","click"],["name","play-skip-back",1,"w-8","h-8"],[1,"w-16","h-16","cursor-pointer","relative","overflow-hidden","rounded-full","ion-activatable","flex","items-center","justify-center","bg-white",2,"box-shadow","0 0 30px 4px #fff"],[4,"ngIf"],["name","play-skip-forward",1,"w-8","h-8"],["name","shuffle-outline",1,"w-8","h-8"],["id","playlist-modal",3,"isOpen","initialBreakpoint","backdropBreakpoint","breakpoints","canDismiss"],["modal",""],["class","w-8 h-8","name","pause",3,"click",4,"ngIf"],["class","w-8 h-8","name","play",3,"click",4,"ngIf"],["name","pause",1,"w-8","h-8",3,"click"],["name","play",1,"w-8","h-8",3,"click"],["name","circles"],[1,"modal-content"],[1,"modal-title",3,"click"],["fill","clear",3,"color"],["slot","start","name","library-outline"],[1,"playlist-container"],[4,"ngFor","ngForOf"],[1,"flex","items-center","gap-4","mx-2","py-2","px-4","rounded-lg","cursor-pointer","h-fit",3,"click"],[1,"w-16","h-16"],["alt","Cover",1,"rounded-xl",3,"src"],[1,"text-lg","font-bold"],["name","musical-notes-outline",4,"ngIf"],[1,"text-sm","text-gray-500"],[1,"flex","items-center","ml-auto"],["name","circles",4,"ngIf"],["name","musical-notes-outline"]],template:function(a,e){if(1&a&&(n.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),n._UZ(5,"img",5),n.qZA(),n.TgZ(6,"div",6)(7,"h2",7),n._uU(8),n.qZA(),n.TgZ(9,"h3"),n._uU(10),n.qZA()()(),n.TgZ(11,"div",8)(12,"div",9)(13,"div",10),n._uU(14),n.qZA(),n.TgZ(15,"div",11,12),n._UZ(17,"ion-progress-bar",13),n.qZA(),n.TgZ(18,"div",14),n._uU(19),n.qZA()(),n.TgZ(20,"div",15)(21,"app-music-button",16),n.NdJ("click",function(){return e.repeat=!e.repeat}),n._UZ(22,"ion-icon",17),n.TgZ(23,"div",18),n._uU(24," 1 "),n.qZA()(),n.TgZ(25,"div",19)(26,"app-music-button",20),n.NdJ("click",function(){return e.onPrev()}),n._UZ(27,"ion-icon",21),n.qZA(),n.TgZ(28,"div",22),n._UZ(29,"ion-ripple-effect"),n.YNc(30,x,3,2,"ng-container",23),n.YNc(31,k,2,0,"ng-container",23),n.qZA(),n.TgZ(32,"app-music-button",20),n.NdJ("click",function(){return e.onNext()}),n._UZ(33,"ion-icon",24),n.qZA()(),n.TgZ(34,"app-music-button",16),n.NdJ("click",function(){return e.mix=!e.mix}),n._UZ(35,"ion-icon",25),n.qZA()()()()(),n.TgZ(36,"ion-modal",26,27),n.ALo(38,"async"),n.YNc(39,f,8,4,"ng-template"),n.qZA()()),2&a){const c=n.MAs(37);let p;n.xp6(1),n.Akn(e.getBackgroundImgStyle()),n.xp6(4),n.Q6J("src",e.currentSong.files.cover,n.LSH),n.xp6(3),n.Oqu(e.currentSong.title),n.xp6(2),n.Oqu(e.currentSong.artist),n.xp6(2),n.Q6J("ngStyle",n.VKq(25,r,null!=e.wavesurfer&&e.wavesurfer.isReady?"visible":"hidden")),n.xp6(2),n.Oqu(e.formatTime(e.currentTime)),n.xp6(3),n.Q6J("hidden",e.isDrawn),n.xp6(2),n.Oqu(e.formatTime(e.duration)),n.xp6(2),n.Q6J("active",e.repeat),n.xp6(2),n.Q6J("hidden",!e.repeat),n.xp6(3),n.Q6J("disabled",0===e.currentSongIndex),n.xp6(4),n.Q6J("ngIf",!e.isLoading),n.xp6(1),n.Q6J("ngIf",e.isLoading),n.xp6(1),n.Q6J("disabled",e.currentSongIndex===e.songs.length-1),n.xp6(2),n.Q6J("active",e.mix),n.xp6(2),n.ekj("opened",(null==(p=n.lcZ(38,23,null==c?null:c.ionBreakpointDidChange))?null:p.detail.breakpoint)===e.lastBreakpoint),n.Q6J("isOpen",!0)("initialBreakpoint",e.initialBreakpoint)("backdropBreakpoint",e.initialBreakpoint)("breakpoints",n.WLB(27,s,e.initialBreakpoint,e.lastBreakpoint))("canDismiss",e.canDismiss)}},dependencies:[_.sg,_.O5,_.PC,C.YG,C.W2,C.gu,C.X7,C.H$,C.PQ,C.ki,A,_.Ov],styles:[".waveform[_ngcontent-%COMP%]{cursor:pointer}ion-modal[_ngcontent-%COMP%]{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s;--background: transparent}ion-modal[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{--background: transparent}ion-modal[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent}ion-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{height:100%;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}ion-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{position:relative;background-color:#0006;padding-bottom:.5rem;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}ion-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{position:relative;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s;left:calc(50% - 3.5rem)}ion-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .playlist-container[_ngcontent-%COMP%]{height:100%;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));padding-top:2rem;padding-bottom:2rem;opacity:.9}ion-modal.opened[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}ion-modal.opened[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity));padding-bottom:0}ion-modal.opened[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{left:0;font-size:1.5rem;line-height:2rem;font-weight:800}"]});const i=[{path:"",component:l}];class t{}t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[Q.Bz.forChild(i),Q.Bz]});class o{}o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[q.m,t]})},6454:X=>{var U,Z;self,X.exports=(U={"./src/drawer.canvasentry.js":
/*!***********************************!*\
                !*** ./src/drawer.canvasentry.js ***!
                \***********************************/(V,h,n)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var w=E(n(
/*! ./util/style */
"./src/util/style.js")),R=E(n(
/*! ./util/get-id */
"./src/util/get-id.js"));function E(y){return y&&y.__esModule?y:{default:y}}function _(y,g){for(var d=0;d<g.length;d++){var m=g[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(y,m.key,m)}}h.default=function(){function y(){(function C(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")})(this,y),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,R.default)(typeof this.constructor.name<"u"?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}return function S(y,g,d){g&&_(y.prototype,g),d&&_(y,d),Object.defineProperty(y,"prototype",{writable:!1})}(y,[{key:"initWave",value:function(d){this.wave=d,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(d){this.progress=d,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(d,m,O,x){this.start=this.wave.offsetLeft/m||0,this.end=this.start+d/m,this.wave.width=O,this.wave.height=x;var k={width:d+"px"};(0,w.default)(this.wave,k),this.hasProgressCanvas&&(this.progress.width=O,this.progress.height=x,(0,w.default)(this.progress,k))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(d,m){this.waveCtx.fillStyle=this.getFillStyle(this.waveCtx,d),this.hasProgressCanvas&&(this.progressCtx.fillStyle=this.getFillStyle(this.progressCtx,m))}},{key:"getFillStyle",value:function(d,m){if("string"==typeof m||m instanceof CanvasGradient)return m;var O=d.createLinearGradient(0,0,0,d.canvas.height);return m.forEach(function(x,k){return O.addColorStop(k/m.length,x)}),O}},{key:"applyCanvasTransforms",value:function(d){d&&(this.waveCtx.setTransform(0,1,1,0,0,0),this.hasProgressCanvas&&this.progressCtx.setTransform(0,1,1,0,0,0))}},{key:"fillRects",value:function(d,m,O,x,k){this.fillRectToContext(this.waveCtx,d,m,O,x,k),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,d,m,O,x,k)}},{key:"fillRectToContext",value:function(d,m,O,x,k,M){d&&(M?this.drawRoundedRect(d,m,O,x,k,M):d.fillRect(m,O,x,k))}},{key:"drawRoundedRect",value:function(d,m,O,x,k,M){0!==k&&(k<0&&(O-=k*=-1),d.beginPath(),d.moveTo(m+M,O),d.lineTo(m+x-M,O),d.quadraticCurveTo(m+x,O,m+x,O+M),d.lineTo(m+x,O+k-M),d.quadraticCurveTo(m+x,O+k,m+x-M,O+k),d.lineTo(m+M,O+k),d.quadraticCurveTo(m,O+k,m,O+k-M),d.lineTo(m,O+M),d.quadraticCurveTo(m,O,m+M,O),d.closePath(),d.fill())}},{key:"drawLines",value:function(d,m,O,x,k,M){this.drawLineToContext(this.waveCtx,d,m,O,x,k,M),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,d,m,O,x,k,M)}},{key:"drawLineToContext",value:function(d,m,O,x,k,M,P){if(d){var o,u,a,v=m.length/2,b=Math.round(v*this.start),r=b,s=Math.round(v*this.end)+1,l=this.wave.width/(s-r-1),i=x+k,t=O/x;for(d.beginPath(),d.moveTo((r-b)*l,i),d.lineTo((r-b)*l,i-Math.round((m[2*r]||0)/t)),o=r;o<s;o++)u=m[2*o]||0,a=Math.round(u/t),d.lineTo((o-b)*l+this.halfPixel,i-a);for(var e=s-1;e>=r;e--)u=m[2*e+1]||0,a=Math.round(u/t),d.lineTo((e-b)*l+this.halfPixel,i-a);d.lineTo((r-b)*l,i-Math.round((m[2*r+1]||0)/t)),d.closePath(),d.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(d,m,O){var x=this;return"blob"===O?new Promise(function(k){x.wave.toBlob(k,d,m)}):"dataURL"===O?this.wave.toDataURL(d,m):void 0}}]),y}(),V.exports=h.default},"./src/drawer.js":
/*!***********************!*\
                !*** ./src/drawer.js ***!
                \***********************/(V,h,n)=>{"use strict";function w(P){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(v){return typeof v}:function(v){return v&&"function"==typeof Symbol&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(P)}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var R=function C(P,v){if(!v&&P&&P.__esModule)return P;if(null===P||"object"!==w(P)&&"function"!=typeof P)return{default:P};var b=E(v);if(b&&b.has(P))return b.get(P);var f={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in P)if("default"!==s&&Object.prototype.hasOwnProperty.call(P,s)){var l=r?Object.getOwnPropertyDescriptor(P,s):null;l&&(l.get||l.set)?Object.defineProperty(f,s,l):f[s]=P[s]}return f.default=P,b&&b.set(P,f),f}(n(
/*! ./util */
"./src/util/index.js"));function E(P){if("function"!=typeof WeakMap)return null;var v=new WeakMap,b=new WeakMap;return(E=function(r){return r?b:v})(P)}function S(P,v){for(var b=0;b<v.length;b++){var f=v[b];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(P,f.key,f)}}function g(P,v){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,r){return f.__proto__=r,f})(P,v)}function m(P,v){if(v&&("object"===w(v)||"function"==typeof v))return v;if(void 0!==v)throw new TypeError("Derived constructors may only return object or undefined");return function O(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function k(P){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)})(P)}h.default=function(P){!function y(P,v){if("function"!=typeof v&&null!==v)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(v&&v.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),v&&g(P,v)}(b,P);var v=function d(P){var v=function x(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,f=k(P);if(v){var s=k(this).constructor;r=Reflect.construct(f,arguments,s)}else r=f.apply(this,arguments);return m(this,r)}}(b);function b(f,r){var s;return function _(P,v){if(!(P instanceof v))throw new TypeError("Cannot call a class as a function")}(this,b),(s=v.call(this)).container=R.withOrientation(f,r.vertical),s.params=r,s.width=0,s.height=r.height*s.params.pixelRatio,s.lastPos=0,s.wrapper=null,s}return function A(P,v,b){v&&S(P.prototype,v),b&&S(P,b),Object.defineProperty(P,"prototype",{writable:!1})}(b,[{key:"style",value:function(r,s){return R.style(r,s)}},{key:"createWrapper",value:function(){this.wrapper=R.withOrientation(this.container.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",cursor:this.params.hideCursor?"none":"auto",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(r,s){!s&&r.preventDefault();var l=R.withOrientation(r.targetTouches?r.targetTouches[0]:r,this.params.vertical).clientX,i=this.wrapper.getBoundingClientRect(),t=this.width,o=this.getWidth(),u=this.getProgressPixels(i,l);return R.clamp(!this.params.fillParent&&t<o?u*(this.params.pixelRatio/t)||0:(u+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,0,1)}},{key:"getProgressPixels",value:function(r,s){return this.params.rtl?r.right-s:s-r.left}},{key:"setupWrapperEvents",value:function(){var r=this;this.wrapper.addEventListener("click",function(s){var l=R.withOrientation(s,r.params.vertical),i=r.wrapper.offsetHeight-r.wrapper.clientHeight;if(0!==i){var t=r.wrapper.getBoundingClientRect();if(l.clientY>=t.bottom-i)return}r.params.interact&&r.fireEvent("click",s,r.handleEvent(s))}),this.wrapper.addEventListener("dblclick",function(s){r.params.interact&&r.fireEvent("dblclick",s,r.handleEvent(s))}),this.wrapper.addEventListener("scroll",function(s){return r.fireEvent("scroll",s)})}},{key:"drawPeaks",value:function(r,s,l,i){this.setWidth(s)||this.clearWave(),this.params.barWidth?this.drawBars(r,0,l,i):this.drawWave(r,0,l,i)}},{key:"resetScroll",value:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(r){this.recenterOnPosition(this.wrapper.scrollWidth*r,!0)}},{key:"recenterOnPosition",value:function(r,s){var l=this.wrapper.scrollLeft,i=~~(this.wrapper.clientWidth/2),t=this.wrapper.scrollWidth-this.wrapper.clientWidth,o=r-i,u=o-l;if(0!=t){if(!s&&-i<=u&&u<i){var a=this.params.autoCenterRate;a/=i,a*=t,o=l+(u=Math.max(-a,Math.min(a,u)))}(o=Math.max(0,Math.min(t,o)))!=l&&(this.wrapper.scrollLeft=o)}}},{key:"getScrollX",value:function(){var r=0;if(this.wrapper){var s=this.params.pixelRatio;if(r=Math.round(this.wrapper.scrollLeft*s),this.params.scrollParent){var l=~~(this.wrapper.scrollWidth*s-this.getWidth());r=Math.min(l,Math.max(0,r))}}return r}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(r){return this.width!=r&&(this.width=r,this.style(this.wrapper,this.params.fillParent||this.params.scrollParent?{width:""}:{width:~~(this.width/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"setHeight",value:function(r){return r!=this.height&&(this.height=r,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(r){var s=1/this.params.pixelRatio,l=Math.round(r*this.width)*s;(l<this.lastPos||l-this.lastPos>=s)&&(this.lastPos=l,this.params.scrollParent&&this.params.autoCenter&&this.recenterOnPosition(~~(this.wrapper.scrollWidth*r),this.params.autoCenterImmediately),this.updateProgress(l))}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container.domElement&&this.container.removeChild(this.wrapper.domElement),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(r,s,l,i){}},{key:"drawWave",value:function(r,s,l,i){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(r){}}]),b}(R.Observer),V.exports=h.default},"./src/drawer.multicanvas.js":
/*!***********************************!*\
                !*** ./src/drawer.multicanvas.js ***!
                \***********************************/(V,h,n)=>{"use strict";function w(f){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(f)}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var R=A(n(
/*! ./drawer */
"./src/drawer.js")),E=function S(f,r){if(!r&&f&&f.__esModule)return f;if(null===f||"object"!==w(f)&&"function"!=typeof f)return{default:f};var s=_(r);if(s&&s.has(f))return s.get(f);var l={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in f)if("default"!==t&&Object.prototype.hasOwnProperty.call(f,t)){var o=i?Object.getOwnPropertyDescriptor(f,t):null;o&&(o.get||o.set)?Object.defineProperty(l,t,o):l[t]=f[t]}return l.default=f,s&&s.set(f,l),l}(n(
/*! ./util */
"./src/util/index.js")),C=A(n(
/*! ./drawer.canvasentry */
"./src/drawer.canvasentry.js"));function _(f){if("function"!=typeof WeakMap)return null;var r=new WeakMap,s=new WeakMap;return(_=function(i){return i?s:r})(f)}function A(f){return f&&f.__esModule?f:{default:f}}function g(f,r){for(var s=0;s<r.length;s++){var l=r[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(f,l.key,l)}}function O(f,r){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,i){return l.__proto__=i,l})(f,r)}function k(f,r){if(r&&("object"===w(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function M(f){if(void 0===f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}(f)}function v(f){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)})(f)}h.default=function(f){!function m(f,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(r&&r.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),Object.defineProperty(f,"prototype",{writable:!1}),r&&O(f,r)}(s,f);var r=function x(f){var r=function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var i,l=v(f);if(r){var t=v(this).constructor;i=Reflect.construct(l,arguments,t)}else i=l.apply(this,arguments);return k(this,i)}}(s);function s(l,i){var t;return function y(f,r){if(!(f instanceof r))throw new TypeError("Cannot call a class as a function")}(this,s),(t=r.call(this,l,i)).maxCanvasWidth=i.maxCanvasWidth,t.maxCanvasElementWidth=Math.round(i.maxCanvasWidth/i.pixelRatio),t.hasProgressCanvas=i.waveColor!=i.progressColor,t.halfPixel=.5/i.pixelRatio,t.canvases=[],t.progressWave=null,t.EntryClass=C.default,t.canvasContextAttributes=i.drawingContextAttributes,t.overlap=2*Math.ceil(i.pixelRatio/2),t.barRadius=i.barRadius||0,t.vertical=i.vertical,t}return function d(f,r,s){r&&g(f.prototype,r),s&&g(f,s),Object.defineProperty(f,"prototype",{writable:!1})}(s,[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=E.withOrientation(this.wrapper.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var i=this,t=Math.round(this.width/this.params.pixelRatio),o=Math.ceil(t/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<o;)this.addCanvas();for(;this.canvases.length>o;)this.removeCanvas();var u=this.maxCanvasWidth+this.overlap,a=this.canvases.length-1;this.canvases.forEach(function(e,c){c==a&&(u=i.width-i.maxCanvasWidth*a),i.updateDimensions(e,u,i.height),e.clearWave()})}},{key:"addCanvas",value:function(){var i=new this.EntryClass;i.canvasContextAttributes=this.canvasContextAttributes,i.hasProgressCanvas=this.hasProgressCanvas,i.halfPixel=this.halfPixel;var t=this.maxCanvasElementWidth*this.canvases.length,o=E.withOrientation(this.wrapper.appendChild(document.createElement("canvas")),this.params.vertical);if(this.style(o,{position:"absolute",zIndex:2,left:t+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),i.initWave(o),this.hasProgressCanvas){var u=E.withOrientation(this.progressWave.appendChild(document.createElement("canvas")),this.params.vertical);this.style(u,{position:"absolute",left:t+"px",top:0,bottom:0,height:"100%"}),i.initProgress(u)}this.canvases.push(i)}},{key:"removeCanvas",value:function(){var i=this.canvases[this.canvases.length-1];i.wave.parentElement.removeChild(i.wave.domElement),this.hasProgressCanvas&&i.progress.parentElement.removeChild(i.progress.domElement),i&&(i.destroy(),i=null),this.canvases.pop()}},{key:"updateDimensions",value:function(i,t,o){var u=Math.round(t/this.params.pixelRatio),a=Math.round(this.width/this.params.pixelRatio);i.updateDimensions(u,a,t,o),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var i=this;E.frame(function(){i.canvases.forEach(function(t){return t.clearWave()})})()}},{key:"drawBars",value:function(i,t,o,u){var a=this;return this.prepareDraw(i,t,o,u,function(e){var c=e.absmax,W=e.offsetY,D=e.halfH,B=e.peaks,j=e.channelIndex;if(void 0!==o)for(var L=e.hasMinVals?2:1,N=B.length/L,I=a.params.barWidth*a.params.pixelRatio,F=I+(null===a.params.barGap?Math.max(a.params.pixelRatio,~~(I/2)):Math.max(a.params.pixelRatio,a.params.barGap*a.params.pixelRatio)),$=N/a.width,te=u,z=o;z<te;z+=F){var G=0,Y=Math.floor(z*$)*L,ne=Math.floor((z+F)*$)*L;do{var K=Math.abs(B[Y]);K>G&&(G=K),Y+=L}while(Y<ne);var J=Math.round(G/c*D);a.params.barMinHeight&&(J=Math.max(J,a.params.barMinHeight)),a.fillRect(z+a.halfPixel,D-J+W,I+a.halfPixel,2*J,a.barRadius,j)}})}},{key:"drawWave",value:function(i,t,o,u){var a=this;return this.prepareDraw(i,t,o,u,function(e){var c=e.absmax,W=e.offsetY,D=e.halfH,B=e.peaks,j=e.channelIndex;if(!e.hasMinVals){for(var L=[],N=B.length,I=0;I<N;I++)L[2*I]=B[I],L[2*I+1]=-B[I];B=L}void 0!==o&&a.drawLine(B,c,D,W,o,u,j),a.fillRect(0,D+W-a.halfPixel,a.width,a.halfPixel,a.barRadius,j)})}},{key:"drawLine",value:function(i,t,o,u,a,e,c){var p=this,T=this.params.splitChannelsOptions.channelColors[c]||{},W=T.waveColor,D=T.progressColor;this.canvases.forEach(function(B,j){p.setFillStyles(B,W,D),p.applyCanvasTransforms(B,p.params.vertical),B.drawLines(i,t,o,u,a,e)})}},{key:"fillRect",value:function(i,t,o,u,a,e){for(var c=Math.floor(i/this.maxCanvasWidth),p=Math.min(Math.ceil((i+o)/this.maxCanvasWidth)+1,this.canvases.length),T=c;T<p;T++){var W=this.canvases[T],D=T*this.maxCanvasWidth,B={x1:Math.max(i,T*this.maxCanvasWidth),y1:t,x2:Math.min(i+o,T*this.maxCanvasWidth+W.wave.width),y2:t+u};if(B.x1<B.x2){var j=this.params.splitChannelsOptions.channelColors[e]||{};this.setFillStyles(W,j.waveColor,j.progressColor),this.applyCanvasTransforms(W,this.params.vertical),W.fillRects(B.x1-D,B.y1,B.x2-B.x1,B.y2-B.y1,a)}}}},{key:"hideChannel",value:function(i){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(i)}},{key:"prepareDraw",value:function(i,t,o,u,a,e,c){var p=this;return E.frame(function(){if(i[0]instanceof Array){var T=i;if(p.params.splitChannels){var D,W=T.filter(function(H,F){return!p.hideChannel(F)});return p.params.splitChannelsOptions.overlay||p.setHeight(Math.max(W.length,1)*p.params.height*p.params.pixelRatio),p.params.splitChannelsOptions&&p.params.splitChannelsOptions.relativeNormalization&&(D=E.max(T.map(function(H){return E.absMax(H)}))),T.forEach(function(H,F){return p.prepareDraw(H,F,o,u,a,W.indexOf(H),D)})}i=T[0]}if(!p.hideChannel(t)){var B=1/p.params.barHeight;p.params.normalize&&(B=void 0===c?E.absMax(i):c);var j=[].some.call(i,function(H){return H<0}),L=p.params.height*p.params.pixelRatio,I=L*e||0;return p.params.splitChannelsOptions&&p.params.splitChannelsOptions.overlay&&(I=0),a({absmax:B,hasMinVals:j,height:L,offsetY:I,halfH:L/2,peaks:i,channelIndex:t})}})()}},{key:"setFillStyles",value:function(i){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.waveColor,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.params.progressColor;i.setFillStyles(t,o)}},{key:"applyCanvasTransforms",value:function(i){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i.applyCanvasTransforms(t)}},{key:"getImage",value:function(i,t,o){if("blob"===o)return Promise.all(this.canvases.map(function(a){return a.getImage(i,t,o)}));if("dataURL"===o){var u=this.canvases.map(function(a){return a.getImage(i,t,o)});return u.length>1?u:u[0]}}},{key:"updateProgress",value:function(i){this.style(this.progressWave,{width:i+"px"})}}]),s}(R.default),V.exports=h.default},"./src/mediaelement-webaudio.js":
/*!**************************************!*\
                !*** ./src/mediaelement-webaudio.js ***!
                \**************************************/(V,h,n)=>{"use strict";function w(v){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(v)}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var R=function E(v){return v&&v.__esModule?v:{default:v}}(n(
/*! ./mediaelement */
"./src/mediaelement.js"));function _(v,b){for(var f=0;f<b.length;f++){var r=b[f];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(v,r.key,r)}}function A(){return A=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(b,f,r){var s=y(b,f);if(s){var l=Object.getOwnPropertyDescriptor(s,f);return l.get?l.get.call(arguments.length<3?b:r):l.value}},A.apply(this,arguments)}function y(v,b){for(;!Object.prototype.hasOwnProperty.call(v,b)&&null!==(v=M(v)););return v}function d(v,b){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r})(v,b)}function O(v,b){if(b&&("object"===w(b)||"function"==typeof b))return b;if(void 0!==b)throw new TypeError("Derived constructors may only return object or undefined");return function x(v){if(void 0===v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}(v)}function M(v){return(M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(f){return f.__proto__||Object.getPrototypeOf(f)})(v)}h.default=function(v){!function g(v,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),b&&d(v,b)}(f,v);var b=function m(v){var b=function k(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var s,r=M(v);if(b){var l=M(this).constructor;s=Reflect.construct(r,arguments,l)}else s=r.apply(this,arguments);return O(this,s)}}(f);function f(r){var s;return function C(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}(this,f),(s=b.call(this,r)).params=r,s.sourceMediaElement=null,s}return function S(v,b,f){b&&_(v.prototype,b),f&&_(v,f),Object.defineProperty(v,"prototype",{writable:!1})}(f,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(s,l,i){A(M(f.prototype),"_load",this).call(this,s,l,i),this.createMediaElementSource(s)}},{key:"createMediaElementSource",value:function(s){this.sourceMediaElement=this.ac.createMediaElementSource(s),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(s,l){return this.resumeAudioContext(),A(M(f.prototype),"play",this).call(this,s,l)}},{key:"destroy",value:function(){A(M(f.prototype),"destroy",this).call(this),this.destroyWebAudio()}}]),f}(R.default),V.exports=h.default},"./src/mediaelement.js":
/*!*****************************!*\
                !*** ./src/mediaelement.js ***!
                \*****************************/(V,h,n)=>{"use strict";function w(r){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(r)}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var R=function S(r){return r&&r.__esModule?r:{default:r}}(n(
/*! ./webaudio */
"./src/webaudio.js")),E=function _(r,s){if(!s&&r&&r.__esModule)return r;if(null===r||"object"!==w(r)&&"function"!=typeof r)return{default:r};var l=C(s);if(l&&l.has(r))return l.get(r);var i={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in r)if("default"!==o&&Object.prototype.hasOwnProperty.call(r,o)){var u=t?Object.getOwnPropertyDescriptor(r,o):null;u&&(u.get||u.set)?Object.defineProperty(i,o,u):i[o]=r[o]}return i.default=r,l&&l.set(r,i),i}(n(
/*! ./util */
"./src/util/index.js"));function C(r){if("function"!=typeof WeakMap)return null;var s=new WeakMap,l=new WeakMap;return(C=function(t){return t?l:s})(r)}function y(r,s){for(var l=0;l<s.length;l++){var i=s[l];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function d(){return d=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(s,l,i){var t=m(s,l);if(t){var o=Object.getOwnPropertyDescriptor(t,l);return o.get?o.get.call(arguments.length<3?s:i):o.value}},d.apply(this,arguments)}function m(r,s){for(;!Object.prototype.hasOwnProperty.call(r,s)&&null!==(r=b(r)););return r}function x(r,s){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,t){return i.__proto__=t,i})(r,s)}function M(r,s){if(s&&("object"===w(s)||"function"==typeof s))return s;if(void 0!==s)throw new TypeError("Derived constructors may only return object or undefined");return function P(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r)}function b(r){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)})(r)}h.default=function(r){!function O(r,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&x(r,s)}(l,r);var s=function k(r){var s=function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var t,i=b(r);if(s){var o=b(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return M(this,t)}}(l);function l(i){var t;return function A(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,i)).params=i,t.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},t.mediaType=i.mediaType.toLowerCase(),t.elementPosition=i.elementPosition,t.peaks=null,t.playbackRate=1,t.volume=1,t.isMuted=!1,t.buffer=null,t.onPlayEnd=null,t.mediaListeners={},t}return function g(r,s,l){s&&y(r.prototype,s),l&&y(r,l),Object.defineProperty(r,"prototype",{writable:!1})}(l,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var t=this;this.mediaListeners.error=function(){t.fireEvent("error","Error loading media element")},this.mediaListeners.canplay=function(){t.fireEvent("canplay")},this.mediaListeners.ended=function(){t.fireEvent("finish")},this.mediaListeners.play=function(){t.fireEvent("play")},this.mediaListeners.pause=function(){t.fireEvent("pause")},this.mediaListeners.seeked=function(o){t.fireEvent("seek")},this.mediaListeners.volumechange=function(o){t.isMuted=t.media.muted,t.volume=t.isMuted?0:t.media.volume,t.fireEvent("volume")},Object.keys(this.mediaListeners).forEach(function(o){t.media.removeEventListener(o,t.mediaListeners[o]),t.media.addEventListener(o,t.mediaListeners[o])})}},{key:"createTimer",value:function(){var t=this;this.on("play",function u(){t.isPaused()||(t.fireEvent("audioprocess",t.getCurrentTime()),E.frame(u)())}),this.on("pause",function(){t.fireEvent("audioprocess",t.getCurrentTime())})}},{key:"load",value:function(t,o,u,a){var e=document.createElement(this.mediaType);e.controls=this.params.mediaControls,e.autoplay=this.params.autoplay||!1,e.preload=a??"auto",e.src=t,e.style.width="100%";var c=o.querySelector(this.mediaType);c&&o.removeChild(c),o.appendChild(e),this._load(e,u,a)}},{key:"loadElt",value:function(t,o){t.controls=this.params.mediaControls,t.autoplay=this.params.autoplay||!1,this._load(t,o,t.preload)}},{key:"_load",value:function(t,o,u){if(!(t instanceof HTMLMediaElement)||typeof t.addEventListener>"u")throw new Error("media parameter is not a valid media element");"function"==typeof t.load&&!(o&&"none"==u)&&t.load(),this.media=t,this._setupMediaListeners(),this.peaks=o,this.onPlayEnd=null,this.buffer=null,this.isMuted=t.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var t=(this.buffer||this.media).duration;return t>=1/0&&(t=this.media.seekable.end(0)),t}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(t){this.playbackRate=t||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(t){null!=t&&!isNaN(t)&&(this.media.currentTime=t),this.clearPlayEnd()}},{key:"play",value:function(t,o){this.seekTo(t);var u=this.media.play();return o&&this.setPlayEnd(o),u}},{key:"pause",value:function(){var t;return this.media&&(t=this.media.pause()),this.clearPlayEnd(),t}},{key:"setPlayEnd",value:function(t){var o=this;this.clearPlayEnd(),this._onPlayEnd=function(u){u>=t&&(o.pause(),o.seekTo(t))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(t,o,u){return this.buffer?d(b(l.prototype),"getPeaks",this).call(this,t,o,u):this.peaks||[]}},{key:"setSinkId",value:function(t){return t?this.media.setSinkId?this.media.setSinkId(t):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+t))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(t){this.volume=t,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(t){this.isMuted=this.media.muted=t}},{key:"destroy",value:function(){var t=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach(function(o){t.media&&t.media.removeEventListener(o,t.mediaListeners[o])}),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}]),l}(R.default),V.exports=h.default},"./src/peakcache.js":
/*!**************************!*\
                !*** ./src/peakcache.js ***!
                \**************************/(V,h)=>{"use strict";function w(C,_){for(var S=0;S<_.length;S++){var A=_[S];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(C,A.key,A)}}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0,h.default=function(){function C(){(function n(C,_){if(!(C instanceof _))throw new TypeError("Cannot call a class as a function")})(this,C),this.clearPeakCache()}return function R(C,_,S){_&&w(C.prototype,_),S&&w(C,S),Object.defineProperty(C,"prototype",{writable:!1})}(C,[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(S,A,y){S!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=S);for(var g=[],d=0;d<this.peakCacheRanges.length&&this.peakCacheRanges[d]<A;)d++;for(d%2==0&&g.push(A);d<this.peakCacheRanges.length&&this.peakCacheRanges[d]<=y;)g.push(this.peakCacheRanges[d]),d++;d%2==0&&g.push(y),g=g.filter(function(O,x,k){return 0==x?O!=k[x+1]:x==k.length-1?O!=k[x-1]:O!=k[x-1]&&O!=k[x+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(g),this.peakCacheRanges=this.peakCacheRanges.sort(function(O,x){return O-x}).filter(function(O,x,k){return 0==x?O!=k[x+1]:x==k.length-1?O!=k[x-1]:O!=k[x-1]&&O!=k[x+1]});var m=[];for(d=0;d<g.length;d+=2)m.push([g[d],g[d+1]]);return m}},{key:"getCacheRanges",value:function(){var A,S=[];for(A=0;A<this.peakCacheRanges.length;A+=2)S.push([this.peakCacheRanges[A],this.peakCacheRanges[A+1]]);return S}}]),C}(),V.exports=h.default},"./src/util/absMax.js":
/*!****************************!*\
                !*** ./src/util/absMax.js ***!
                \****************************/(V,h,n)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.default=function C(_){var S=(0,w.default)(_),A=(0,R.default)(_);return-A>S?-A:S};var w=E(n(
/*! ./max */
"./src/util/max.js")),R=E(n(
/*! ./min */
"./src/util/min.js"));function E(_){return _&&_.__esModule?_:{default:_}}V.exports=h.default},"./src/util/clamp.js":
/*!***************************!*\
                !*** ./src/util/clamp.js ***!
                \***************************/(V,h)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.default=function n(w,R,E){return Math.min(Math.max(R,w),E)},V.exports=h.default},"./src/util/fetch.js":
/*!***************************!*\
                !*** ./src/util/fetch.js ***!
                \***************************/(V,h,n)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.default=function A(y){if(!y)throw new Error("fetch options missing");if(!y.url)throw new Error("fetch url missing");var g=new w.default,d=new Headers,m=new Request(y.url);g.controller=new AbortController,y&&y.requestHeaders&&y.requestHeaders.forEach(function(k){d.append(k.key,k.value)});var O=y.responseType||"json",x={method:y.method||"GET",headers:d,mode:y.mode||"cors",credentials:y.credentials||"same-origin",cache:y.cache||"default",redirect:y.redirect||"follow",referrer:y.referrer||"client",signal:g.controller.signal};return fetch(m,x).then(function(k){g.response=k;var M=!0;k.body||(M=!1);var P=k.headers.get("content-length");return null===P&&(M=!1),M?(g.onProgress=function(v){g.fireEvent("progress",v)},new Response(new ReadableStream(new S(g,P,k)),x)):k}).then(function(k){var M;if(k.ok)switch(O){case"arraybuffer":return k.arrayBuffer();case"json":return k.json();case"blob":return k.blob();case"text":return k.text();default:M="Unknown responseType: "+O}throw M||(M="HTTP error status: "+k.status),new Error(M)}).then(function(k){g.fireEvent("success",k)}).catch(function(k){g.fireEvent("error",k)}),g.fetchRequest=m,g};var w=function R(y){return y&&y.__esModule?y:{default:y}}(n(
/*! ./observer */
"./src/util/observer.js"));function C(y,g){for(var d=0;d<g.length;d++){var m=g[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(y,m.key,m)}}var S=function(){function y(g,d,m){(function E(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")})(this,y),this.instance=g,this.instance._reader=m.body.getReader(),this.total=parseInt(d,10),this.loaded=0}return function _(y,g,d){g&&C(y.prototype,g),d&&C(y,d),Object.defineProperty(y,"prototype",{writable:!1})}(y,[{key:"start",value:function(d){var m=this;!function x(){m.instance._reader.read().then(function(k){var P=k.value;if(k.done)return 0===m.total&&m.instance.onProgress.call(m.instance,{loaded:m.loaded,total:m.total,lengthComputable:!1}),void d.close();m.loaded+=P.byteLength,m.instance.onProgress.call(m.instance,{loaded:m.loaded,total:m.total,lengthComputable:0!==m.total}),d.enqueue(P),x()}).catch(function(k){d.error(k)})}()}}]),y}();V.exports=h.default},"./src/util/frame.js":
/*!***************************!*\
                !*** ./src/util/frame.js ***!
                \***************************/(V,h,n)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.default=function E(C){return function(){for(var _=arguments.length,S=new Array(_),A=0;A<_;A++)S[A]=arguments[A];return(0,w.default)(function(){return C.apply(void 0,S)})}};var w=function R(C){return C&&C.__esModule?C:{default:C}}(n(
/*! ./request-animation-frame */
"./src/util/request-animation-frame.js"));V.exports=h.default},"./src/util/get-id.js":
/*!****************************!*\
                !*** ./src/util/get-id.js ***!
                \****************************/(V,h)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.default=function n(w){return void 0===w&&(w="wavesurfer_"),w+Math.random().toString(32).substring(2)},V.exports=h.default},"./src/util/index.js":
/*!***************************!*\
                !*** ./src/util/index.js ***!
                \***************************/(V,h,n)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),Object.defineProperty(h,"Observer",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(h,"absMax",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(h,"clamp",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(h,"debounce",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(h,"fetchFile",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(h,"frame",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(h,"getId",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(h,"ignoreSilenceMode",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(h,"max",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(h,"min",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(h,"preventClick",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(h,"requestAnimationFrame",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(h,"style",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(h,"withOrientation",{enumerable:!0,get:function(){return x.default}});var w=M(n(
/*! ./get-id */
"./src/util/get-id.js")),R=M(n(
/*! ./max */
"./src/util/max.js")),E=M(n(
/*! ./min */
"./src/util/min.js")),C=M(n(
/*! ./absMax */
"./src/util/absMax.js")),_=M(n(
/*! ./observer */
"./src/util/observer.js")),S=M(n(
/*! ./style */
"./src/util/style.js")),A=M(n(
/*! ./request-animation-frame */
"./src/util/request-animation-frame.js")),y=M(n(
/*! ./frame */
"./src/util/frame.js")),g=M(n(
/*! debounce */
"./node_modules/debounce/index.js")),d=M(n(
/*! ./prevent-click */
"./src/util/prevent-click.js")),m=M(n(
/*! ./fetch */
"./src/util/fetch.js")),O=M(n(
/*! ./clamp */
"./src/util/clamp.js")),x=M(n(
/*! ./orientation */
"./src/util/orientation.js")),k=M(n(
/*! ./silence-mode */
"./src/util/silence-mode.js"));function M(P){return P&&P.__esModule?P:{default:P}}},"./src/util/max.js":
/*!*************************!*\
                !*** ./src/util/max.js ***!
                \*************************/(V,h)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.default=function n(w){var R=-1/0;return Object.keys(w).forEach(function(E){w[E]>R&&(R=w[E])}),R},V.exports=h.default},"./src/util/min.js":
/*!*************************!*\
                !*** ./src/util/min.js ***!
                \*************************/(V,h)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.default=function n(w){var R=Number(1/0);return Object.keys(w).forEach(function(E){w[E]<R&&(R=w[E])}),R},V.exports=h.default},"./src/util/observer.js":
/*!******************************!*\
                !*** ./src/util/observer.js ***!
                \******************************/(V,h)=>{"use strict";function w(C,_){for(var S=0;S<_.length;S++){var A=_[S];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(C,A.key,A)}}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0,h.default=function(){function C(){(function n(C,_){if(!(C instanceof _))throw new TypeError("Cannot call a class as a function")})(this,C),this._disabledEventEmissions=[],this.handlers=null}return function R(C,_,S){_&&w(C.prototype,_),S&&w(C,S),Object.defineProperty(C,"prototype",{writable:!1})}(C,[{key:"on",value:function(S,A){var y=this;this.handlers||(this.handlers={});var g=this.handlers[S];return g||(g=this.handlers[S]=[]),g.push(A),{name:S,callback:A,un:function(m,O){return y.un(m,O)}}}},{key:"un",value:function(S,A){if(this.handlers){var g,y=this.handlers[S];if(y)if(A)for(g=y.length-1;g>=0;g--)y[g]==A&&y.splice(g,1);else y.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(S,A){var y=this;return this.on(S,function d(){for(var m=arguments.length,O=new Array(m),x=0;x<m;x++)O[x]=arguments[x];A.apply(y,O),setTimeout(function(){y.un(S,d)},0)})}},{key:"setDisabledEventEmissions",value:function(S){this._disabledEventEmissions=S}},{key:"_isDisabledEventEmission",value:function(S){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(S)}},{key:"fireEvent",value:function(S){for(var A=arguments.length,y=new Array(A>1?A-1:0),g=1;g<A;g++)y[g-1]=arguments[g];if(this.handlers&&!this._isDisabledEventEmission(S)){var d=this.handlers[S];d&&d.forEach(function(m){m.apply(void 0,y)})}}}]),C}(),V.exports=h.default},"./src/util/orientation.js":
/*!*********************************!*\
                !*** ./src/util/orientation.js ***!
                \*********************************/(V,h)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.default=function E(C,_){return C[R]?C:new Proxy(C,{get:function(A,y,g){if(y===R)return!0;if("domElement"===y)return A;if("style"===y)return E(A.style,_);if("canvas"===y)return E(A.canvas,_);if("getBoundingClientRect"===y)return function(){return E(A.getBoundingClientRect.apply(A,arguments),_)};if("getContext"===y)return function(){return E(A.getContext.apply(A,arguments),_)};var d=A[w(y,_)];return"function"==typeof d?d.bind(A):d},set:function(A,y,g){return A[w(y,_)]=g,!0}})};var n={width:"height",height:"width",overflowX:"overflowY",overflowY:"overflowX",clientWidth:"clientHeight",clientHeight:"clientWidth",clientX:"clientY",clientY:"clientX",scrollWidth:"scrollHeight",scrollLeft:"scrollTop",offsetLeft:"offsetTop",offsetTop:"offsetLeft",offsetHeight:"offsetWidth",offsetWidth:"offsetHeight",left:"top",right:"bottom",top:"left",bottom:"right",borderRightStyle:"borderBottomStyle",borderRightWidth:"borderBottomWidth",borderRightColor:"borderBottomColor"};function w(C,_){return Object.prototype.hasOwnProperty.call(n,C)&&_?n[C]:C}var R=Symbol("isProxy");V.exports=h.default},"./src/util/prevent-click.js":
/*!***********************************!*\
                !*** ./src/util/prevent-click.js ***!
                \***********************************/(V,h)=>{"use strict";function n(R){R.stopPropagation(),document.body.removeEventListener("click",n,!0)}Object.defineProperty(h,"__esModule",{value:!0}),h.default=function w(R){document.body.addEventListener("click",n,!0)},V.exports=h.default},"./src/util/request-animation-frame.js":
/*!*********************************************!*\
                !*** ./src/util/request-animation-frame.js ***!
                \*********************************************/(V,h)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var n=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(w,R){return setTimeout(w,1e3/60)}).bind(window);h.default=n,V.exports=h.default},"./src/util/silence-mode.js":
/*!**********************************!*\
                !*** ./src/util/silence-mode.js ***!
                \**********************************/(V,h)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.default=function n(){var R=document.createElement("div");R.innerHTML='<audio x-webkit-airplay="deny"></audio>';var E=R.children.item(0);E.src="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",E.preload="auto",E.type="audio/mpeg",E.disableRemotePlayback=!0,E.play(),E.remove(),R.remove()},V.exports=h.default},"./src/util/style.js":
/*!***************************!*\
                !*** ./src/util/style.js ***!
                \***************************/(V,h)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.default=function n(w,R){return Object.keys(R).forEach(function(E){w.style[E]!==R[E]&&(w.style[E]=R[E])}),w},V.exports=h.default},"./src/wavesurfer.js":
/*!***************************!*\
                !*** ./src/wavesurfer.js ***!
                \***************************/(V,h,n)=>{"use strict";function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(t)}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var R=function d(t,o){if(!o&&t&&t.__esModule)return t;if(null===t||"object"!==w(t)&&"function"!=typeof t)return{default:t};var u=g(o);if(u&&u.has(t))return u.get(t);var a={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in t)if("default"!==c&&Object.prototype.hasOwnProperty.call(t,c)){var p=e?Object.getOwnPropertyDescriptor(t,c):null;p&&(p.get||p.set)?Object.defineProperty(a,c,p):a[c]=t[c]}return a.default=t,u&&u.set(t,a),a}(n(
/*! ./util */
"./src/util/index.js")),E=y(n(
/*! ./drawer.multicanvas */
"./src/drawer.multicanvas.js")),C=y(n(
/*! ./webaudio */
"./src/webaudio.js")),_=y(n(
/*! ./mediaelement */
"./src/mediaelement.js")),S=y(n(
/*! ./peakcache */
"./src/peakcache.js")),A=y(n(
/*! ./mediaelement-webaudio */
"./src/mediaelement-webaudio.js"));function y(t){return t&&t.__esModule?t:{default:t}}function g(t){if("function"!=typeof WeakMap)return null;var o=new WeakMap,u=new WeakMap;return(g=function(e){return e?u:o})(t)}function O(t,o){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,e){return a.__proto__=e,a})(t,o)}function k(t,o){if(o&&("object"===w(o)||"function"==typeof o))return o;if(void 0!==o)throw new TypeError("Derived constructors may only return object or undefined");return M(t)}function M(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(u){return u.__proto__||Object.getPrototypeOf(u)})(t)}function b(t,o,u){return o in t?Object.defineProperty(t,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):t[o]=u,t}function r(t,o){for(var u=0;u<o.length;u++){var a=o[u];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var i=function(t){!function m(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),o&&O(t,o)}(u,t);var o=function x(t){var o=function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,a=v(t);if(o){var c=v(this).constructor;e=Reflect.construct(a,arguments,c)}else e=a.apply(this,arguments);return k(this,e)}}(u);function u(a){var e;if(function f(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this,u),b(M(e=o.call(this)),"defaultParams",{audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,hideCursor:!1,ignoreSilenceMode:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:E.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1,splitDragSelection:!1},vertical:!1,waveColor:"#999",xhr:{}}),b(M(e),"backends",{MediaElement:_.default,WebAudio:C.default,MediaElementWebAudio:A.default}),b(M(e),"util",R),e.params=Object.assign({},e.defaultParams,a),e.params.splitChannelsOptions=Object.assign({},e.defaultParams.splitChannelsOptions,a.splitChannelsOptions),e.container="string"==typeof a.container?document.querySelector(e.params.container):e.params.container,!e.container)throw new Error("Container element not found");if(e.mediaContainer=null==e.params.mediaContainer?e.container:"string"==typeof e.params.mediaContainer?document.querySelector(e.params.mediaContainer):e.params.mediaContainer,!e.mediaContainer)throw new Error("Media Container element not found");if(e.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(e.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(!0===e.params.rtl&&R.style(e.container,!0===e.params.vertical?{transform:"rotateX(180deg)"}:{transform:"rotateY(180deg)"}),e.params.backgroundColor&&e.setBackgroundColor(e.params.backgroundColor),e.savedVolume=0,e.isMuted=!1,e.tmpEvents=[],e.currentRequest=null,e.arraybuffer=null,e.drawer=null,e.backend=null,e.peakCache=null,"function"!=typeof e.params.renderer)throw new Error("Renderer parameter is invalid");e.Drawer=e.params.renderer,"AudioElement"==e.params.backend&&(e.params.backend="MediaElement"),("WebAudio"==e.params.backend||"MediaElementWebAudio"===e.params.backend)&&!C.default.prototype.supportsWebAudio.call(null)&&(e.params.backend="MediaElement"),e.Backend=e.backends[e.params.backend],e.initialisedPluginList={},e.isDestroyed=!1,e.isReady=!1;var c=0;return e._onResize=R.debounce(function(){e.drawer.wrapper&&c!=e.drawer.wrapper.clientWidth&&!e.params.scrollParent&&(c=e.drawer.wrapper.clientWidth)&&e.drawer.fireEvent("redraw")},"number"==typeof e.params.responsive?e.params.responsive:100),k(e,M(e))}return function s(t,o,u){return o&&r(t.prototype,o),u&&r(t,u),Object.defineProperty(t,"prototype",{writable:!1}),t}(u,[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(e){var c=this;return e.forEach(function(p){return c.addPlugin(p)}),e.forEach(function(p){p.deferInit||c.initPlugin(p.name)}),this.fireEvent("plugins-registered",e),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(e){var c=this;if(!e.name)throw new Error("Plugin does not have a name!");if(!e.instance)throw new Error("Plugin ".concat(e.name," does not have an instance property!"));e.staticProps&&Object.keys(e.staticProps).forEach(function(W){c[W]=e.staticProps[W]});var p=e.instance;return Object.getOwnPropertyNames(R.Observer.prototype).forEach(function(W){p.prototype[W]=R.Observer.prototype[W]}),this[e.name]=new p(e.params||{},this),this.fireEvent("plugin-added",e.name),this}},{key:"initPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet!"));return this.initialisedPluginList[e]&&this.destroyPlugin(e),this[e].init(),this.initialisedPluginList[e]=!0,this.fireEvent("plugin-initialised",e),this}},{key:"destroyPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[e])throw new Error("Plugin ".concat(e," is not active and cannot be destroyed!"));if("function"!=typeof this[e].destroy)throw new Error("Plugin ".concat(e," does not have a destroy function!"));return this[e].destroy(),delete this.initialisedPluginList[e],this.fireEvent("plugin-destroyed",e),this}},{key:"destroyAllPlugins",value:function(){var e=this;Object.keys(this.initialisedPluginList).forEach(function(c){return e.destroyPlugin(c)})}},{key:"createDrawer",value:function(){var e=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),!1!==this.params.responsive&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",function(){e.drawBuffer(),e.drawer.progress(e.backend.getPlayedPercents())}),this.drawer.on("click",function(c,p){setTimeout(function(){return e.seekTo(p)},0)}),this.drawer.on("scroll",function(c){e.params.partialRender&&e.drawBuffer(),e.fireEvent("scroll",c)})}},{key:"createBackend",value:function(){var e=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",function(){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("finish")}),this.backend.on("play",function(){return e.fireEvent("play")}),this.backend.on("pause",function(){return e.fireEvent("pause")}),this.backend.on("audioprocess",function(c){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("audioprocess",c)}),("MediaElement"===this.params.backend||"MediaElementWebAudio"===this.params.backend)&&(this.backend.on("seek",function(){e.drawer.progress(e.backend.getPlayedPercents())}),this.backend.on("volume",function(){var c=e.getVolume();e.fireEvent("volume",c),e.backend.isMuted!==e.isMuted&&(e.isMuted=e.backend.isMuted,e.fireEvent("mute",e.isMuted))}))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new S.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(e){e>=this.getDuration()?this.seekTo(1):this.seekTo(e/this.getDuration())}},{key:"play",value:function(e,c){var p=this;return this.params.ignoreSilenceMode&&R.ignoreSilenceMode(),this.fireEvent("interaction",function(){return p.play(e,c)}),this.backend.play(e,c)}},{key:"setPlayEnd",value:function(e){this.backend.setPlayEnd(e)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(e){this.skip(-e||-this.params.skipLength)}},{key:"skipForward",value:function(e){this.skip(e||this.params.skipLength)}},{key:"skip",value:function(e){var c=this.getDuration()||1,p=this.getCurrentTime()||0;p=Math.max(0,Math.min(c,p+(e||0))),this.seekAndCenter(p/c)}},{key:"seekAndCenter",value:function(e){this.seekTo(e),this.drawer.recenter(e)}},{key:"seekTo",value:function(e){var c=this;if("number"!=typeof e||!isFinite(e)||e<0||e>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",function(){return c.seekTo(e)});var p="WebAudio"===this.params.backend,T=this.backend.isPaused();p&&!T&&this.backend.pause();var W=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(e*this.getDuration()),this.drawer.progress(e),p&&!T&&this.backend.play(),this.params.scrollParent=W,this.fireEvent("seek",e)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(e){return this.backend.setSinkId(e)}},{key:"setVolume",value:function(e){this.backend.setVolume(e),this.fireEvent("volume",e)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(e){this.backend.setPlaybackRate(e)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(e){e!==this.isMuted?(this.backend.setMute?(this.backend.setMute(e),this.isMuted=e):e?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)):this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[e]?this.params.splitChannelsOptions.channelColors[e].waveColor:this.params.waveColor}},{key:"setWaveColor",value:function(e){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.params.splitChannelsOptions.channelColors[c]?this.params.splitChannelsOptions.channelColors[c].waveColor=e:this.params.waveColor=e,this.drawBuffer()}},{key:"getProgressColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[e]?this.params.splitChannelsOptions.channelColors[e].progressColor:this.params.progressColor}},{key:"setProgressColor",value:function(e,c){this.params.splitChannelsOptions.channelColors[c]?this.params.splitChannelsOptions.channelColors[c].progressColor=e:this.params.progressColor=e,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(e){this.params.backgroundColor=e,R.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(e){this.params.cursorColor=e,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(e){this.params.height=e,this.drawer.setHeight(e*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(e){this.params.splitChannelsOptions.filterChannels=e,this.drawBuffer()}},{key:"drawBuffer",value:function(){var D,e=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),c=this.drawer.getWidth(),p=e,T=0,W=Math.max(T+c,p);if(this.params.fillParent&&(!this.params.scrollParent||e<c)&&(T=0,W=p=c),this.params.partialRender){var j,B=this.peakCache.addRangeToPeakCache(p,T,W);for(j=0;j<B.length;j++)D=this.backend.getPeaks(p,B[j][0],B[j][1]),this.drawer.drawPeaks(D,p,B[j][0],B[j][1])}else D=this.backend.getPeaks(p,T,W),this.drawer.drawPeaks(D,p,T,W);this.fireEvent("redraw",D,p)}},{key:"zoom",value:function(e){e?(this.params.minPxPerSec=e,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",e)}},{key:"loadArrayBuffer",value:function(e){var c=this;this.decodeArrayBuffer(e,function(p){c.isDestroyed||c.loadDecodedBuffer(p)})}},{key:"loadDecodedBuffer",value:function(e){this.backend.load(e),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(e){var c=this,p=new FileReader;p.addEventListener("progress",function(T){return c.onProgress(T)}),p.addEventListener("load",function(T){return c.loadArrayBuffer(T.target.result)}),p.addEventListener("error",function(){return c.fireEvent("error","Error reading file")}),p.readAsArrayBuffer(e),this.empty()}},{key:"load",value:function(e,c,p,T){if(!e)throw new Error("url parameter cannot be empty");if(this.empty(),p){var W={"Preload is not 'auto', 'none' or 'metadata'":-1===["auto","metadata","none"].indexOf(p),"Peaks are not provided":!c,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":-1===["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend),"Url is not of type string":"string"!=typeof e},D=Object.keys(W).filter(function(B){return W[B]});D.length&&(console.warn("Preload parameter of wavesurfer.load will be ignored because:\n\t- "+D.join("\n\t- ")),p=null)}switch("WebAudio"===this.params.backend&&e instanceof HTMLMediaElement&&(e=e.src),this.params.backend){case"WebAudio":return this.loadBuffer(e,c,T);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(e,c,p,T)}}},{key:"loadBuffer",value:function(e,c,p){var T=this,W=function(B){return B&&T.tmpEvents.push(T.once("ready",B)),T.getArrayBuffer(e,function(j){return T.loadArrayBuffer(j)})};if(!c)return W();this.backend.setPeaks(c,p),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",W))}},{key:"loadMediaElement",value:function(e,c,p,T){var W=this,D=e;if("string"==typeof e)this.backend.load(D,this.mediaContainer,c,p);else{var B=e;this.backend.loadElt(B,c),D=B.src}this.tmpEvents.push(this.backend.once("canplay",function(){W.backend.destroyed||(W.drawBuffer(),W.isReady=!0,W.fireEvent("ready"))}),this.backend.once("error",function(j){return W.fireEvent("error",j)})),c&&(this.backend.setPeaks(c,T),this.drawBuffer(),this.fireEvent("waveform-ready")),(!c||this.params.forceDecode)&&this.backend.supportsWebAudio()&&this.getArrayBuffer(D,function(j){W.decodeArrayBuffer(j,function(L){W.backend.buffer=L,W.backend.setPeaks(null),W.drawBuffer(),W.fireEvent("waveform-ready")})})}},{key:"decodeArrayBuffer",value:function(e,c){var p=this;this.isDestroyed||(this.arraybuffer=e,this.backend.decodeArrayBuffer(e,function(T){!p.isDestroyed&&p.arraybuffer==e&&(c(T),p.arraybuffer=null)},function(){return p.fireEvent("error","Error decoding audiobuffer")}))}},{key:"getArrayBuffer",value:function(e,c){var p=this,T=Object.assign({url:e,responseType:"arraybuffer"},this.params.xhr),W=R.fetchFile(T);return this.currentRequest=W,this.tmpEvents.push(W.on("progress",function(D){p.onProgress(D)}),W.on("success",function(D){c(D),p.currentRequest=null}),W.on("error",function(D){p.fireEvent("error",D),p.currentRequest=null})),W}},{key:"onProgress",value:function(e){this.fireEvent("loading",Math.round(100*(e.lengthComputable?e.loaded/e.total:e.loaded/(e.loaded+1e6))),e.target)}},{key:"exportPCM",value:function(e,c,p,T,W){c=c||1e4,p=p||!1;var D=this.backend.getPeaks(e=e||1024,T=T||0,W),B=[].map.call(D,function(j){return Math.round(j*c)/c});return new Promise(function(j,L){if(!p){var N=new Blob([JSON.stringify(B)],{type:"application/json;charset=utf-8"}),I=URL.createObjectURL(N);window.open(I),URL.revokeObjectURL(I)}j(B)})}},{key:"exportImage",value:function(e,c,p){return e||(e="image/png"),c||(c=1),p||(p="dataURL"),this.drawer.getImage(e,c,p)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch(function(e){}),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach(function(e){return e.un()})}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),!1!==this.params.responsive&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}],[{key:"create",value:function(e){return new u(e).init()}}]),u}(R.Observer);h.default=i,b(i,"VERSION","6.4.0"),b(i,"util",R),V.exports=h.default},"./src/webaudio.js":
/*!*************************!*\
                !*** ./src/webaudio.js ***!
                \*************************/(V,h,n)=>{"use strict";function w(r){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(r)}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var R=function C(r,s){if(!s&&r&&r.__esModule)return r;if(null===r||"object"!==w(r)&&"function"!=typeof r)return{default:r};var l=E(s);if(l&&l.has(r))return l.get(r);var i={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in r)if("default"!==o&&Object.prototype.hasOwnProperty.call(r,o)){var u=t?Object.getOwnPropertyDescriptor(r,o):null;u&&(u.get||u.set)?Object.defineProperty(i,o,u):i[o]=r[o]}return i.default=r,l&&l.set(r,i),i}(n(
/*! ./util */
"./src/util/index.js"));function E(r){if("function"!=typeof WeakMap)return null;var s=new WeakMap,l=new WeakMap;return(E=function(t){return t?l:s})(r)}function S(r,s){for(var l=0;l<s.length;l++){var i=s[l];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function g(r,s){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,t){return i.__proto__=t,i})(r,s)}function m(r,s){if(s&&("object"===w(s)||"function"==typeof s))return s;if(void 0!==s)throw new TypeError("Derived constructors may only return object or undefined");return O(r)}function O(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function k(r){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)})(r)}function M(r,s,l){return s in r?Object.defineProperty(r,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[s]=l,r}var P="playing",v="paused",b="finished",f=function(r){!function y(r,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&g(r,s)}(l,r);var s=function d(r){var s=function x(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var t,i=k(r);if(s){var o=k(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return m(this,t)}}(l);function l(i){var t,o,u;return function _(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}(this,l),M(O(u=s.call(this)),"audioContext",null),M(O(u),"offlineAudioContext",null),M(O(u),"stateBehaviors",(M(t={},P,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),M(t,v,{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition}}),M(t,b,{init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),t)),u.params=i,u.ac=i.audioContext||(u.supportsWebAudio()?u.getAudioContext():{}),u.lastPlay=u.ac.currentTime,u.startPosition=0,u.scheduledPause=null,u.states=(M(o={},P,Object.create(u.stateBehaviors[P])),M(o,v,Object.create(u.stateBehaviors[v])),M(o,b,Object.create(u.stateBehaviors[b])),o),u.buffer=null,u.filters=[],u.gainNode=null,u.mergedPeaks=null,u.offlineAc=null,u.peaks=null,u.playbackRate=1,u.analyser=null,u.scriptNode=null,u.source=null,u.splitPeaks=[],u.state=null,u.explicitDuration=i.duration,u.sinkStreamDestination=null,u.sinkAudioElement=null,u.destroyed=!1,u}return function A(r,s,l){s&&S(r.prototype,s),l&&S(r,l),Object.defineProperty(r,"prototype",{writable:!1})}(l,[{key:"supportsWebAudio",value:function(){return!(!window.AudioContext&&!window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(t){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,t)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(v),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach(function(t){t&&t.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(t){this.state!==this.states[t]&&(this.state=this.states[t],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];this.setFilters(o)}},{key:"setFilters",value:function(t){this.disconnectFilters(),t&&t.length&&(this.filters=t,this.analyser.disconnect(),t.reduce(function(o,u){return o.connect(u),u},this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.scriptNode=this.params.audioScriptProcessor?this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.ac.createScriptProcessor(l.scriptBufferSize):this.ac.createJavaScriptNode(l.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var t=this;this.scriptNode.onaudioprocess=function(){var o=t.getCurrentTime();o>=t.getDuration()?(t.setState(b),t.fireEvent("pause")):o>=t.scheduledPause?t.pause():t.state===t.states[P]&&t.fireEvent("audioprocess",o)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=null}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.gainNode=this.ac.createGain?this.ac.createGain():this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(t){return t?(this.sinkAudioElement||(this.sinkAudioElement=new window.Audio,this.sinkAudioElement.autoplay=!0),this.sinkAudioElement.setSinkId?(this.sinkStreamDestination||(this.sinkStreamDestination=this.ac.createMediaStreamDestination()),this.gainNode.disconnect(),this.gainNode.connect(this.sinkStreamDestination),this.sinkAudioElement.srcObject=this.sinkStreamDestination.stream,this.sinkAudioElement.setSinkId(t)):Promise.reject(new Error("setSinkId is not supported in your browser"))):Promise.reject(new Error("Invalid deviceId: "+t))}},{key:"setVolume",value:function(t){this.gainNode.gain.setValueAtTime(t,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(t,o,u){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(t,function(a){return o(a)},u):this.offlineAc.decodeAudioData(t).then(function(a){return o(a)}).catch(function(a){return u(a)})}},{key:"setPeaks",value:function(t,o){null!=o&&(this.explicitDuration=o),this.peaks=t}},{key:"setLength",value:function(t){if(!this.mergedPeaks||t!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[],this.mergedPeaks=[];var u,o=this.buffer?this.buffer.numberOfChannels:1;for(u=0;u<o;u++)this.splitPeaks[u]=[],this.splitPeaks[u][2*(t-1)]=0,this.splitPeaks[u][2*(t-1)+1]=0;this.mergedPeaks[2*(t-1)]=0,this.mergedPeaks[2*(t-1)+1]=0}}},{key:"getPeaks",value:function(t,o,u){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(o=o||0,u=u||t-1,this.setLength(t),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var a=this.createBuffer(1,4096,this.sampleRate);this.buffer=a.buffer}var T,e=this.buffer.length/t,c=~~(e/10)||1,p=this.buffer.numberOfChannels;for(T=0;T<p;T++){var W=this.splitPeaks[T],D=this.buffer.getChannelData(T),B=void 0;for(B=o;B<=u;B++){var j=~~(B*e),L=~~(j+e),N=D[j],I=N,H=void 0;for(H=j;H<L;H+=c){var F=D[H];F>I&&(I=F),F<N&&(N=F)}W[2*B]=I,W[2*B+1]=N,(0==T||I>this.mergedPeaks[2*B])&&(this.mergedPeaks[2*B]=I),(0==T||N<this.mergedPeaks[2*B+1])&&(this.mergedPeaks[2*B+1]=N)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&("function"==typeof this.ac.close&&"closed"!=this.ac.state&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null),this.sinkStreamDestination&&(this.sinkAudioElement.pause(),this.sinkAudioElement.srcObject=null,this.sinkStreamDestination.disconnect(),this.sinkStreamDestination=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(t){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=t,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){"suspended"==this.ac.state&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states[P]}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(t,o){if(this.buffer)return this.scheduledPause=null,null==t&&(t=this.getCurrentTime())>=this.getDuration()&&(t=0),null==o&&(o=this.getDuration()),this.startPosition=t,this.lastPlay=this.ac.currentTime,this.state===this.states[b]&&this.setState(v),{start:t,end:o}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(t,o){if(this.buffer){this.createSource();var u=this.seekTo(t,o);t=u.start,this.scheduledPause=o=u.end,this.source.start(0,t),this.resumeAudioContext(),this.setState(P),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime();try{this.source&&this.source.stop(0)}catch{}this.setState(v),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(t){this.playbackRate=t||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(t){this.scheduledPause=t}}]),l}(R.Observer);h.default=f,M(f,"scriptBufferSize",256),V.exports=h.default},"./node_modules/debounce/index.js":
/*!****************************************!*\
                !*** ./node_modules/debounce/index.js ***!
                \****************************************/V=>{function h(n,w,R){var E,C,_,S,A;function y(){var d=Date.now()-S;d<w&&d>=0?E=setTimeout(y,w-d):(E=null,R||(A=n.apply(_,C),_=C=null))}null==w&&(w=100);var g=function(){_=this,C=arguments,S=Date.now();var d=R&&!E;return E||(E=setTimeout(y,w)),d&&(A=n.apply(_,C),_=C=null),A};return g.clear=function(){E&&(clearTimeout(E),E=null)},g.flush=function(){E&&(A=n.apply(_,C),_=C=null,clearTimeout(E),E=null)},g}h.debounce=h,V.exports=h}},Z={},function q(V){var h=Z[V];if(void 0!==h)return h.exports;var n=Z[V]={exports:{}};return U[V](n,n.exports,q),n.exports}("./src/wavesurfer.js"))}}]);